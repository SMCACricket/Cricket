<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SMCA POS points & Honors</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font import for a modern look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap');

        /* Watermark for Logo - This will not be visible on a white background, but will show up on a dark background. */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('SMCA_logo.jpg');
            background-repeat: no-repeat;
            background-position: center center;
            background-size: 40%;
            opacity: 0.1;
            z-index: -1;
            pointer-events: none;
        }

        /* Modal specific styles */
        .modal {
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-active {
            opacity: 1;
            visibility: visible;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 font-inter antialiased flex flex-col items-center min-h-screen p-4 md:p-8">

    <!-- Back button to return to the landing page -->
    <a href="https://smcacricket.github.io/SMCACricket/" class="inline-flex items-center px-6 py-3 my-4 md:my-8 rounded-full bg-gray-800 text-white font-bold transition-all duration-300 transform hover:scale-105 hover:bg-gray-700 shadow-lg">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
        </svg>
        Back to Home
    </a>

    <!-- Main Heading -->
    <h1 class="text-4xl md:text-5xl font-extrabold text-white text-center my-8 drop-shadow-lg">
        SMCA POS points & Honors
    </h1>

    <!-- Form Container -->
    <div class="w-full max-w-3xl">
        <form id="customForm" class="bg-gray-800 p-8 md:p-12 rounded-2xl shadow-2xl w-full">

            <!-- Division Selection -->
            <label for="region" class="block mb-2 text-gray-300 font-medium">Division:</label>
            <select id="region" name="entry.710054407" class="w-full p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                <option value="">Select your team Division</option>
                <option value="Division 1">Division 1</option>
                <option value="Division 2">Division 2</option>
                <option value="Division 3">Division 3</option>
                <option value="Division 4">Division 4</option>
                <option value="Division 5">Division 5</option>
                <option value="Division 6">Division 6</option>
                <option value="Division 7">Division 7</option>
                <option value="Division 8">Division 8</option>
                <option value="Division 9">Division 9</option>
                <option value="Division 10">Division 10</option>
                <option value="Division 11">Division 11</option>
                <option value="Division 12">Division 12</option>
                <option value="Division 13">Division 13</option>
                <option value="Division 14">Division 14</option>
                <option value="Division 15">Division 15</option>
                <option value="Division 16">Division 16</option>
                <option value="Division 17">Division 17</option>
                <option value="Division 18">Division 18</option>
                <option value="Division 19">Division 19</option>
                <option value="Division 20">Division 20</option>
                <option value="Division 21">Division 21</option>
                <option value="Division 22">Division 22</option>
                <option value="Division 23">Division 23</option>
                <option value="Division 24">Division 24</option>
                <option value="Division 25">Division 25</option>
                <option value="Division 26">Division 26</option>
            </select>

            <!-- Team Selection -->
            <label for="team" class="block mt-6 mb-2 text-gray-300 font-medium">Team:</label>
            <select id="team" name="entry.524307792" class="w-full p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                <option value="">Select a team</option>
            </select>

            <!-- Round Selection -->
            <label for="round" class="block mt-6 mb-2 text-gray-300 font-medium">Round:</label>
            <select id="round" name="round" class="w-full p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                <option value="">Select Round</option>
                <option value="Round 1">Round 1</option>
                <option value="Round 2">Round 2</option>
                <option value="Round 3">Round 3</option>
                <option value="Round 4">Round 4</option>
                <option value="Round 5">Round 5</option>
                <option value="Round 6">Round 6</option>
                <option value="Round 7">Round 7</option>
            </select>

            <!-- Match Selection -->
            <label for="match" class="block mt-6 mb-2 text-gray-300 font-medium">Match:</label>
            <select id="match" name="match" class="w-full p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                <option value="">Select a Match</option>
            </select>
            
            <hr class="my-8 border-gray-700">

            <!-- Tabs Section -->
            <div class="tabs flex flex-wrap bg-gray-700 rounded-t-xl overflow-hidden shadow-inner">
                <button type="button" class="tab-button active flex-1 py-3 px-4 text-center text-gray-300 font-semibold border-b-4 border-purple-600 hover:bg-gray-600 transition-colors duration-300" onclick="openTab(event, 'playerPointsTab')">Player of the Season Points</button>
                <button type="button" class="tab-button flex-1 py-3 px-4 text-center text-gray-300 font-semibold border-b-4 border-transparent hover:bg-gray-600 transition-colors duration-300" onclick="openTab(event, 'fiveWicketHaulTab')">5 Wicket Haul</button>
                <button type="button" class="tab-button flex-1 py-3 px-4 text-center text-gray-300 font-semibold border-b-4 border-transparent hover:bg-gray-600 transition-colors duration-300" onclick="openTab(event, 'hatTrickTab')">Hat Trick</button>
                <button type="button" class="tab-button flex-1 py-3 px-4 text-center text-gray-300 font-semibold border-b-4 border-transparent hover:bg-gray-600 transition-colors duration-300" onclick="openTab(event, 'centuryTab')">Century</button>
            </div>

            <div class="tab-content-container bg-gray-800 border-2 border-t-0 border-gray-700 p-6 md:p-8 rounded-b-xl shadow-inner">
                <!-- Player of the Season Points Tab -->
                <div id="playerPointsTab" class="tab-content active">
                    <div class="player-award-section mb-6">
                        <h3 class="text-xl font-bold text-gray-200 mb-4">Player awarded with 3 points</h3>
                        <div class="player-award-input-group flex flex-col md:flex-row md:items-center gap-4">
                            <label for="player1Name" class="font-medium text-gray-300">Name:</label>
                            <input type="text" id="player1Name" name="player1Name" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            <span class="player-points-label text-purple-400 font-bold text-lg">3 Points</span>
                        </div>
                    </div>
                    <div class="player-award-section mb-6">
                        <h3 class="text-xl font-bold text-gray-200 mb-4">Player awarded with 2 points</h3>
                        <div class="player-award-input-group flex flex-col md:flex-row md:items-center gap-4">
                            <label for="player2Name" class="font-medium text-gray-300">Name:</label>
                            <input type="text" id="player2Name" name="player2Name" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            <span class="player-points-label text-purple-400 font-bold text-lg">2 Points</span>
                        </div>
                    </div>
                    <div class="player-award-section">
                        <h3 class="text-xl font-bold text-gray-200 mb-4">Player awarded with 1 point</h3>
                        <div class="player-award-input-group flex flex-col md:flex-row md:items-center gap-4">
                            <label for="player3Name" class="font-medium text-gray-300">Name:</label>
                            <input type="text" id="player3Name" name="player3Name" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            <span class="player-points-label text-purple-400 font-bold text-lg">1 Point</span>
                        </div>
                    </div>
                </div>

                <!-- 5 Wicket Haul Tab -->
                <div id="fiveWicketHaulTab" class="tab-content hidden">
                    <div class="player-award-section">
                        <h3 class="text-xl font-bold text-gray-200 mb-4">Player with 5 Wicket Haul</h3>
                        <div class="player-award-input-group flex flex-col gap-4">
                            <div class="flex flex-col md:flex-row md:items-center gap-2">
                                <label for="fiveWicketHaulPlayer" class="font-medium text-gray-300 w-full md:w-1/3">Name:</label>
                                <input type="text" id="fiveWicketHaulPlayer" name="fiveWicketHaulPlayer" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            </div>
                            <div class="flex flex-col md:flex-row md:items-center gap-2">
                                <label for="fiveWicketHaulFigures" class="font-medium text-gray-300 w-full md:w-1/3">Bowling Figures (e.g., 5/30):</label>
                                <input type="text" id="fiveWicketHaulFigures" name="fiveWicketHaulFigures" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            </div>
                            <div class="flex flex-col md:flex-row md:items-center gap-2">
                                <label for="fiveWicketHaulGround" class="font-medium text-gray-300 w-full md:w-1/3">Ground Name:</label>
                                <input type="text" id="fiveWicketHaulGround" name="fiveWicketHaulGround" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hat Trick Tab -->
                <div id="hatTrickTab" class="tab-content hidden">
                    <div class="player-award-section">
                        <h3 class="text-xl font-bold text-gray-200 mb-4">Player with a Hat Trick</h3>
                        <div class="player-award-input-group flex flex-col gap-4">
                            <div class="flex flex-col md:flex-row md:items-center gap-2">
                                <label for="hatTrickPlayer" class="font-medium text-gray-300 w-full md:w-1/3">Name:</label>
                                <input type="text" id="hatTrickPlayer" name="hatTrickPlayer" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            </div>
                            <div class="flex flex-col md:flex-row md:items-center gap-2">
                                <label for="hatTrickFigures" class="font-medium text-gray-300 w-full md:w-1/3">Bowling Figures (e.g., 3/15):</label>
                                <input type="text" id="hatTrickFigures" name="hatTrickFigures" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            </div>
                            <div class="flex flex-col md:flex-row md:items-center gap-2">
                                <label for="hatTrickGround" class="font-medium text-gray-300 w-full md:w-1/3">Ground Name:</label>
                                <input type="text" id="hatTrickGround" name="hatTrickGround" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Century Tab -->
                <div id="centuryTab" class="tab-content hidden">
                    <div class="player-award-section">
                        <h3 class="text-xl font-bold text-gray-200 mb-4">Player with a Century</h3>
                        <div class="player-award-input-group flex flex-col gap-4">
                            <div class="flex flex-col md:flex-row md:items-center gap-2">
                                <label for="centuryPlayer" class="font-medium text-gray-300 w-full md:w-1/3">Name:</label>
                                <input type="text" id="centuryPlayer" name="centuryPlayer" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            </div>
                            <div class="flex flex-col md:flex-row md:items-center gap-2">
                                <label for="centuryScore" class="font-medium text-gray-300 w-full md:w-1/3">Batsman Score (e.g., 105*):</label>
                                <input type="text" id="centuryScore" name="centuryScore" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            </div>
                            <div class="flex flex-col md:flex-row md:items-center gap-2">
                                <label for="centuryGround" class="font-medium text-gray-300 w-full md:w-1/3">Ground Name:</label>
                                <input type="text" id="centuryGround" name="centuryGround" class="flex-grow p-3 rounded-lg bg-gray-700 text-gray-100 border-2 border-gray-600 focus:outline-none focus:border-purple-500 transition-all duration-300">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <hr class="my-8 border-gray-700">

            <!-- Submit Button -->
            <div class="flex justify-center">
                <button type="submit" class="bg-purple-600 text-white font-bold py-3 px-8 rounded-full w-full md:w-auto hover:bg-purple-700 transition-all duration-300 transform hover:scale-105 shadow-lg">
                    Submit
                </button>
            </div>

        </form>
    </div>

    <!-- Custom Modal for Alerts -->
    <div id="custom-modal" class="modal fixed inset-0 flex items-center justify-center bg-black bg-opacity-70 opacity-0 invisible z-50">
        <div class="bg-gray-800 text-gray-100 rounded-lg p-8 m-4 max-w-sm w-full shadow-2xl transform scale-95 transition-all duration-300 ease-in-out">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-xl font-bold text-white">Notification</h3>
                <button id="close-modal-btn" class="text-gray-400 hover:text-white transition-colors">&times;</button>
            </div>
            <p id="modal-message" class="text-gray-300 mb-6"></p>
            <div class="flex justify-end">
                <button id="ok-modal-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-6 rounded-full transition-colors">OK</button>
            </div>
        </div>
    </div>


    <script>
        // Global variables for data caching
        let MatchesBasedOnRoundsDataCache = [];
        let divisionTeamsDataCache = [];

        // --- Custom Modal Functions ---
        function showCustomModal(message) {
            const modal = document.getElementById('custom-modal');
            const modalMessage = document.getElementById('modal-message');
            modalMessage.textContent = message;
            modal.classList.add('modal-active');
        }

        function closeCustomModal() {
            const modal = document.getElementById('custom-modal');
            modal.classList.remove('modal-active');
        }

        // Event listeners for the modal
        document.getElementById('close-modal-btn').addEventListener('click', closeCustomModal);
        document.getElementById('ok-modal-btn').addEventListener('click', closeCustomModal);


        // --- Tab Switching Logic ---
        function openTab(evt, tabName) {
            // Get all tab contents and hide them
            const tabcontent = document.querySelectorAll(".tab-content");
            tabcontent.forEach(content => content.classList.add("hidden"));

            // Get all tab buttons and remove the active class
            const tabbuttons = document.querySelectorAll(".tab-button");
            tabbuttons.forEach(button => button.classList.remove("active", "border-purple-600", "text-white", "bg-gray-700"));
            tabbuttons.forEach(button => button.classList.add("border-transparent", "text-gray-300"));

            // Show the current tab, and add an "active" class to the button that opened the tab
            const activeTab = document.getElementById(tabName);
            activeTab.classList.remove("hidden");
            activeTab.classList.add("active");
            
            const activeTabButton = evt.currentTarget;
            activeTabButton.classList.remove("border-transparent", "text-gray-300");
            activeTabButton.classList.add("active", "border-purple-600", "text-white", "bg-gray-700");
        }

        // --- Existing JavaScript functions, with minor updates for the new design ---
        function populateTeamDropdown(teamsDataCache) {
            const teamDropdownElement = document.getElementById('team');
            teamDropdownElement.innerHTML = '<option value="">Loading teams...</option>';
            teamDropdownElement.disabled = true;

            teamDropdownElement.innerHTML = '';
            const defaultOption = document.createElement("option");
            defaultOption.value = "";
            defaultOption.text = "Select a team";
            teamDropdownElement.add(defaultOption);

            if (teamsDataCache && teamsDataCache.length > 0) {
                teamDropdownElement.disabled = false;
                for (let i = 1; i < teamsDataCache.length; i++) {
                    if (teamsDataCache[i][0] == document.getElementById('region').value) {
                        const option = document.createElement("option");
                        option.text = teamsDataCache[i][1];
                        option.value = teamsDataCache[i][1];
                        teamDropdownElement.add(option);
                    }
                }
                if (teamDropdownElement.options.length <= 1) {
                    const noTeamsOption = document.createElement("option");
                    noTeamsOption.value = "";
                    noTeamsOption.text = "No teams in this division";
                    teamDropdownElement.add(noTeamsOption);
                    teamDropdownElement.disabled = true;
                }
            } else {
                const noTeamsOption = document.createElement("option");
                noTeamsOption.value = "";
                noTeamsOption.text = "No team data available";
                teamDropdownElement.add(noTeamsOption);
                teamDropdownElement.disabled = true;
            }
        };

        function updateRounds(MatchesBasedOnRoundsDataCache) {
            const matchDropdownElement = document.getElementById('match');
            matchDropdownElement.innerHTML = '<option value="">Loading matches...</option>';
            matchDropdownElement.disabled = true;

            const selectedRound = document.getElementById('round').value;

            if (MatchesBasedOnRoundsDataCache && selectedRound !== "") {
                matchDropdownElement.innerHTML = '';
                const defaultOption = document.createElement("option");
                defaultOption.value = "";
                defaultOption.text = "Select a Match";
                matchDropdownElement.add(defaultOption);

                let hasMatches = false;
                matchDropdownElement.disabled = false;

                for (const key in MatchesBasedOnRoundsDataCache) {
                    if (MatchesBasedOnRoundsDataCache.hasOwnProperty(key)) {
                        const matchInfo = MatchesBasedOnRoundsDataCache[key];
                        if (matchInfo && matchInfo[0] === selectedRound) {
                            const option = document.createElement("option");
                            option.text = matchInfo[1];
                            option.value = matchInfo[1];
                            matchDropdownElement.add(option);
                            hasMatches = true;
                        }
                    }
                }

                if (!hasMatches) {
                    const noMatchesOption = document.createElement("option");
                    noMatchesOption.value = "";
                    noMatchesOption.text = "No matches for this round";
                    matchDropdownElement.add(noMatchesOption);
                    matchDropdownElement.disabled = true;
                }
            } else {
                matchDropdownElement.innerHTML = '<option value="">Select a Round first</option>';
                matchDropdownElement.disabled = true;
            }
        }

        document.getElementById('region').addEventListener('change', (event) => {
            const selectedRegion = event.target.value;
            var sheetname = document.getElementById('region').value;

            const teamDropdown = document.getElementById('team');
            teamDropdown.innerHTML = '<option value="">Loading teams...</option>';
            teamDropdown.disabled = true;

            const roundDropdown = document.getElementById('round');
            const matchDropdown = document.getElementById('match');
            roundDropdown.selectedIndex = 0;
            matchDropdown.innerHTML = '<option value="">Select a Round first</option>';
            matchDropdown.disabled = true;


            if (selectedRegion) {
                fetch('https://script.google.com/macros/s/AKfycby6Qr0P_w2xZ4dkvXRstQd2EqZZuF9YgtLcj2ufhMkVnRBDDM4FQ0Ktk0tle45_HEAq/exec' + '?sheetname=' + encodeURIComponent(sheetname))
                    .then(response => response.json())
                    .then(data => {
                        divisionTeamsDataCache = data.teams || [];
                        populateTeamDropdown(divisionTeamsDataCache);
                        teamDropdown.disabled = false;

                        MatchesBasedOnRoundsDataCache = data.listofmatchesbasedonround || [];
                        console.log('MatchesBasedOnRoundsDataCache:', MatchesBasedOnRoundsDataCache);
                    })
                    .catch(error => {
                        console.error('Error fetching data:', error);
                        teamDropdown.innerHTML = '<option value="">Error loading teams</option>';
                        teamDropdown.disabled = false;
                        matchDropdown.innerHTML = '<option value="">Error loading matches</option>';
                        matchDropdown.disabled = false;
                    });
            } else {
                teamDropdown.innerHTML = '<option value="">Select a team</option>';
                teamDropdown.disabled = true;
                roundDropdown.selectedIndex = 0;
                matchDropdown.innerHTML = '<option value="">Select a Round first</option>';
                matchDropdown.disabled = true;
                MatchesBasedOnRoundsDataCache = [];
            }
        });

        document.getElementById('round').addEventListener('change', function() {
            const matchDropdownElement1 = document.getElementById('match');
            matchDropdownElement1.innerHTML = '<option value="">Loading matches....</option>';
            matchDropdownElement1.disabled = true;
            updateRounds(MatchesBasedOnRoundsDataCache);
        });


        document.getElementById('customForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const submitButton = event.submitter;
            submitButton.disabled = true;
            submitButton.classList.add('loading');

            var region = document.getElementById('region').value;
            var team = document.getElementById('team').value;
            var roundNo = document.getElementById('round').value;
            var teamVs = document.getElementById('match').value;

            var threepointsplayer = document.getElementById('player1Name').value;
            var twopointsplayer = document.getElementById('player2Name').value;
            var onepointplayer = document.getElementById('player3Name').value;

            var fiveWicketHaulPlayer = document.getElementById('fiveWicketHaulPlayer').value;
            var fiveWicketHaulFigures = document.getElementById('fiveWicketHaulFigures').value;
            var fiveWicketHaulGround = document.getElementById('fiveWicketHaulGround').value;

            var hatTrickPlayer = document.getElementById('hatTrickPlayer').value;
            var hatTrickFigures = document.getElementById('hatTrickFigures').value;
            var hatTrickGround = document.getElementById('hatTrickGround').value;

            var centuryPlayer = document.getElementById('centuryPlayer').value;
            var centuryScore = document.getElementById('centuryScore').value;
            var centuryGround = document.getElementById('centuryGround').value;


            if (!region || !team || !roundNo || !teamVs) {
                showCustomModal("Please fill in all the required fields (Division, Team, Round, Match).");
                submitButton.disabled = false;
                submitButton.classList.remove('loading');
                return;
            }

            let formData = new URLSearchParams();
            formData.append('region', region);
            formData.append('team', team);
            formData.append('roundNo', roundNo);
            formData.append('match', teamVs);

            formData.append('threepointsplayer', threepointsplayer);
            formData.append('twopointsplayer', twopointsplayer);
            formData.append('onepointplayer', onepointplayer);

            formData.append('fiveWicketHaulPlayer', fiveWicketHaulPlayer);
            formData.append('fiveWicketHaulFigures', fiveWicketHaulFigures);
            formData.append('fiveWicketHaulGround', fiveWicketHaulGround);

            formData.append('hatTrickPlayer', hatTrickPlayer);
            formData.append('hatTrickFigures', hatTrickFigures);
            formData.append('hatTrickGround', hatTrickGround);

            formData.append('centuryPlayer', centuryPlayer);
            formData.append('centuryScore', centuryScore);
            formData.append('centuryGround', centuryGround);

            fetch('https://script.google.com/macros/s/AKfycbwuSozhn9zsMr4MauQl4tEX8Io-WLb5Lr6Ff-w0uc5a1cF6YAIbaJ01TLx30-KXlxrd/exec', {
                    method: 'POST',
                    mode: 'cors',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: formData.toString()
                })
                .then(response => response.text())
                .then(data => {
                    console.log(data);
                    showCustomModal(data);

                    document.getElementById('region').selectedIndex = 0;
                    document.getElementById('round').selectedIndex = 0;

                    document.getElementById('player1Name').value = '';
                    document.getElementById('player2Name').value = '';
                    document.getElementById('player3Name').value = '';
                    document.getElementById('fiveWicketHaulPlayer').value = '';
                    document.getElementById('fiveWicketHaulFigures').value = '';
                    document.getElementById('fiveWicketHaulGround').value = '';
                    document.getElementById('hatTrickPlayer').value = '';
                    document.getElementById('hatTrickFigures').value = '';
                    document.getElementById('hatTrickGround').value = '';
                    document.getElementById('centuryPlayer').value = '';
                    document.getElementById('centuryScore').value = '';
                    document.getElementById('centuryGround').value = '';

                    const teamDropdownOnSubmit = document.getElementById('team');
                    teamDropdownOnSubmit.innerHTML = '<option value="">Select a team</option>';
                    teamDropdownOnSubmit.disabled = true;

                    const matchDropdownOnSubmit = document.getElementById('match');
                    matchDropdownOnSubmit.innerHTML = '<option value="">Select a Round first</option>';
                    matchDropdownOnSubmit.disabled = true;

                    MatchesBasedOnRoundsDataCache = [];
                    divisionTeamsDataCache = [];

                    document.querySelectorAll('.tab-button.active').forEach(btn => {
                        btn.classList.remove('active', 'border-purple-600', 'text-white', 'bg-gray-700');
                        btn.classList.add('border-transparent', 'text-gray-300');
                    });
                    document.querySelectorAll('.tab-content.active').forEach(content => {
                        content.classList.remove('active');
                        content.classList.add('hidden');
                    });
                    
                    document.querySelector('.tab-button').classList.add('active', 'border-purple-600', 'text-white', 'bg-gray-700');
                    document.getElementById('playerPointsTab').classList.remove('hidden');
                    document.getElementById('playerPointsTab').classList.add('active');
                })
                .catch(error => {
                    console.error('Error:', error);
                    showCustomModal('An error occurred. Please try again.');
                })
                .finally(() => {
                    submitButton.disabled = false;
                    submitButton.classList.remove('loading');
                });
        });

        document.addEventListener('DOMContentLoaded', (event) => {
            const firstTabButton = document.querySelector('.tab-button');
            if (firstTabButton) {
                // Ensure the first tab is active on load, including the visual styles
                const firstTabContent = document.getElementById('playerPointsTab');
                firstTabContent.classList.remove('hidden');
                firstTabContent.classList.add('active');
                firstTabButton.classList.remove("border-transparent", "text-gray-300");
                firstTabButton.classList.add("active", "border-purple-600", "text-white", "bg-gray-700");
            }
        });
    </script>
</body>
</html>
