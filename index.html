<!DOCTYPE html>
<html>
<head>
    <title>SMCA POS points & Honors</title>
    <style>
        /* Global Styles and Reset */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f7f6;
            color: #333;
            line-height: 1.6;
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Watermark for Logo */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('SMCA_logo.jpg'); /* Ensure this path is correct */
            background-repeat: no-repeat;
            background-position: center center;
            background-size: 40%;
            opacity: 0.20;
            z-index: -1;
            pointer-events: none;
        }

        /* Main Heading */
        h1 {
            text-align: center;
            color: #2c3e50;
            font-size: 2.8em;
            margin-top: 30px;
            margin-bottom: 40px;
            letter-spacing: 1px;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.1);
        }

        /* Form Container Styling */
        #customForm {
            background-color: rgba(255, 255, 255, 0.85);
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
            box-sizing: border-box;
            margin-bottom: 40px;
        }

        /* Labels */
        label {
            display: block;
            margin-top: 15px;
            margin-bottom: 8px;
            font-weight: bold; /* All general labels are bold */
            font-size: 1.1em;
            color: #555;
        }

        /* Select and Text Inputs */
        select,
        input[type="text"] {
            width: calc(100% - 22px);
            padding: 12px;
            margin: 5px 0;
            border: 1px solid #dcdcdc;
            border-radius: 6px;
            font-size: 1em;
            box-sizing: border-box;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        select:focus,
        input[type="text"]:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 8px rgba(0, 123, 255, 0.3);
        }

        /* Submit Button */
        input[type="submit"] {
            padding: 12px 25px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 30px;
            width: auto;
            display: block;
            margin-left: auto;
            margin-right: auto;
            transition: background-color 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        }

        input[type="submit"]:hover {
            background-color: #0056b3;
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        /* Submit Button - Loading State */
        input[type="submit"]:disabled,
        input[type="submit"].loading {
            background-color: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            pointer-events: none;
        }


        /* Horizontal Rules (Dividers) */
        hr {
            border: none;
            border-top: 1px solid #eee;
            margin: 30px 0;
        }

        /* Player Award Sections - General styles for text boxes */
        .player-award-section h3 {
            color: #4a4a4a;
            font-size: 1.3em;
            margin-bottom: 15px;
        }

        .player-award-input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }
        .player-award-input-group div {
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        /* Labels INSIDE player-award-input-group - making them bold */
        .player-award-input-group label {
            margin-top: 0;
            margin-bottom: 0;
            /* Removed font-weight: normal; here, so it inherits bold from general label rule */
            font-size: 1em; /* Keep specific font-size */
        }


        /* Player Points Label (for 3, 2, 1 points) */
        .player-points-label {
            font-weight: bold;
            color: #007bff;
            font-size: 1.1em;
        }

        /* --- Tab Styles --- */
        .tabs {
            overflow: hidden;
            border-bottom: 1px solid #ccc;
            background-color: #f1f1f1;
            display: flex;
            margin-top: 20px;
            margin-bottom: 0;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
        }

        .tab-button {
            background-color: inherit;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
            font-size: 17px;
            font-weight: bold; /* Make tab text bold */
            flex-grow: 1;
            text-align: center;
            color: #555;
            border-right: 1px solid #eee;
        }

        .tab-button:last-child {
            border-right: none;
        }

        .tab-button:hover {
            background-color: #ddd;
        }

        .tab-button.active {
            background-color: #007bff;
            color: white;
            border-bottom: 1px solid #007bff;
        }

        .tab-content-container {
            border: 1px solid #ccc;
            border-top: none;
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
            padding: 20px;
            background-color: #fff;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            min-height: 200px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            h1 {
                font-size: 2em;
                margin-bottom: 30px;
            }
            #customForm {
                padding: 20px;
            }
            select,
            input[type="text"] {
                width: 100%;
            }
            .player-award-input-group div {
                flex-direction: column;
                align-items: flex-start;
            }
            .player-award-input-group label[style*="margin-left"] {
                margin-left: 0 !important;
                margin-top: 5px;
            }
            .tabs {
                flex-wrap: wrap;
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }
            .tab-button {
                flex-basis: 50%;
                border-bottom: 1px solid #eee;
                border-right: 1px solid #eee;
                box-sizing: border-box;
            }
            .tab-button:nth-child(even) {
                border-right: none;
            }
            .tab-button:last-child {
                border-bottom: none;
            }
        }
    </style>
</head>
<body>
    <h1>SMCA POS points & Honors</h1>
    <!-- Back button to return to the landing page -->
<a href="index.html" class="inline-flex items-center px-6 py-3 my-4 md:my-8 rounded-full bg-gray-800 text-white font-bold transition-all duration-300 transform hover:scale-105 hover:bg-gray-700 shadow-lg">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
    </svg>
    Back to Home
</a>

    <form id="customForm">
        <label for="region">Division:</label>
        <select id="region" name="entry.710054407">
            <option value="">Select your team Division</option>
            <option value="Division 1">Division 1</option>
            <option value="Division 2">Division 2</option>
            <option value="Division 3">Division 3</option>
            <option value="Division 4">Division 4</option>
            <option value="Division 5">Division 5</option>
            <option value="Division 6">Division 6</option>
            <option value="Division 7">Division 7</option>
            <option value="Division 8">Division 8</option>
            <option value="Division 9">Division 9</option>
            <option value="Division 10">Division 10</option>
            <option value="Division 11">Division 11</option>
            <option value="Division 12">Division 12</option>
            <option value="Division 13">Division 13</option>
            <option value="Division 14">Division 14</option>
            <option value="Division 15">Division 15</option>
            <option value="Division 16">Division 16</option>
            <option value="Division 17">Division 17</option>
            <option value="Division 18">Division 18</option>
            <option value="Division 19">Division 19</option>
            <option value="Division 20">Division 20</option>
            <option value="Division 21">Division 21</option>
            <option value="Division 22">Division 22</option>
            <option value="Division 23">Division 23</option>
            <option value="Division 24">Division 24</option>
            <option value="Division 25">Division 25</option>
            <option value="Division 26">Division 26</option>
        </select>
        <br><br>

        <label for="team">Team:</label>
        <select id="team" name="entry.524307792">
            <option value="">Select a team</option>
        </select>
        <br><br>

        <label for="round">Round:</label>
        <select id="round" name="round">
            <option value="">Select Round</option>
            <option value="Round 1">Round 1</option>
            <option value="Round 2">Round 2</option>
            <option value="Round 3">Round 3</option>
            <option value="Round 4">Round 4</option>
            <option value="Round 5">Round 5</option>
            <option value="Round 6">Round 6</option>
            <option value="Round 7">Round 7</option>
        </select>
        <br><br>

        <label for="match">Match:</label>
        <select id="match" name="match">
            <option value="">Select a Match</option>
        </select>
        <br><br>

        <hr>

        <div class="tabs">
            <button type="button" class="tab-button active" onclick="openTab(event, 'playerPointsTab')">Player of the Season Points</button>
            <button type="button" class="tab-button" onclick="openTab(event, 'fiveWicketHaulTab')">5 Wicket Haul</button>
            <button type="button" class="tab-button" onclick="openTab(event, 'hatTrickTab')">Hat Trick</button>
            <button type="button" class="tab-button" onclick="openTab(event, 'centuryTab')">Century</button>
        </div>

        <div class="tab-content-container">
            <div id="playerPointsTab" class="tab-content active">
                <div class="player-award-section">
                    <h3>Player awarded with 3 points</h3>
                    <div class="player-award-input-group">
                        <div>
                            <label for="player1Name">Name:</label>
                            <input type="text" id="player1Name" name="player1Name">
                            <label class="player-points-label">3 Points</label>
                        </div>
                    </div>
                </div>

                <div class="player-award-section">
                    <h3>Player awarded with 2 points</h3>
                    <div class="player-award-input-group">
                        <div>
                            <label for="player2Name">Name:</label>
                            <input type="text" id="player2Name" name="player2Name">
                            <label class="player-points-label">2 Points</label>
                        </div>
                    </div>
                </div>

                <div class="player-award-section">
                    <h3>Player awarded with 1 point</h3>
                    <div class="player-award-input-group">
                        <div>
                            <label for="player3Name">Name:</label>
                            <input type="text" id="player3Name" name="player3Name">
                            <label class="player-points-label">1 Point</label>
                        </div>
                    </div>
                </div>
            </div>

            <div id="fiveWicketHaulTab" class="tab-content">
                <div class="player-award-section">
                    <h3>Player with 5 Wicket Haul</h3>
                    <div class="player-award-input-group">
                        <div>
                            <label for="fiveWicketHaulPlayer">Name:</label>
                            <input type="text" id="fiveWicketHaulPlayer" name="fiveWicketHaulPlayer">
                        </div>
                        <div>
                            <label for="fiveWicketHaulFigures">Bowling Figures (e.g., 5/30):</label>
                            <input type="text" id="fiveWicketHaulFigures" name="fiveWicketHaulFigures">
                        </div>
                        <div>
                            <label for="fiveWicketHaulGround">Ground Name:</label>
                            <input type="text" id="fiveWicketHaulGround" name="fiveWicketHaulGround">
                        </div>
                    </div>
                </div>
            </div>

            <div id="hatTrickTab" class="tab-content">
                <div class="player-award-section">
                    <h3>Player with a Hat Trick</h3>
                    <div class="player-award-input-group">
                        <div>
                            <label for="hatTrickPlayer">Name:</label>
                            <input type="text" id="hatTrickPlayer" name="hatTrickPlayer">
                        </div>
                        <div>
                            <label for="hatTrickFigures">Bowling Figures (e.g., 3/15):</label>
                            <input type="text" id="hatTrickFigures" name="hatTrickFigures">
                        </div>
                        <div>
                            <label for="hatTrickGround">Ground Name:</label>
                            <input type="text" id="hatTrickGround" name="hatTrickGround">
                        </div>
                    </div>
                </div>
            </div>

            <div id="centuryTab" class="tab-content">
                <div class="player-award-section">
                    <h3>Player with a Century</h3>
                    <div class="player-award-input-group">
                        <div>
                            <label for="centuryPlayer">Name:</label>
                            <input type="text" id="centuryPlayer" name="centuryPlayer">
                        </div>
                        <div>
                            <label for="centuryScore">Batsman Score (e.g., 105*):</label>
                            <input type="text" id="centuryScore" name="centuryScore">
                        </div>
                        <div>
                            <label for="centuryGround">Ground Name:</label>
                            <input type="text" id="centuryGround" name="centuryGround">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <hr>

        <input type="submit" value="Submit">
    </form>

    <script>
        let MatchesBasedOnRoundsDataCache = [];
        let divisionTeamsDataCache = [];

        // Function to handle tab switching
        function openTab(evt, tabName) {
            var i, tabcontent, tabbuttons;

            tabcontent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }

            tabbuttons = document.getElementsByClassName("tab-button");
            for (i = 0; i < tabbuttons.length; i++) {
                tabbuttons[i].classList.remove("active");
            }

            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        // --- Existing JavaScript functions ---
        function populateTeamDropdown(teamsDataCache) {
            const teamDropdownElement = document.getElementById('team');
            teamDropdownElement.innerHTML = '<option value="">Loading teams...</option>';
            teamDropdownElement.disabled = true;

            teamDropdownElement.innerHTML = '';
            const defaultOption = document.createElement("option");
            defaultOption.value = "";
            defaultOption.text = "Select a team";
            teamDropdownElement.add(defaultOption);

            if (teamsDataCache && teamsDataCache.length > 0) {
                teamDropdownElement.disabled = false;
                for (let i = 1; i < teamsDataCache.length; i++) {
                    if (teamsDataCache[i][0] == document.getElementById('region').value) {
                        const option = document.createElement("option");
                        option.text = teamsDataCache[i][1];
                        option.value = teamsDataCache[i][1];
                        teamDropdownElement.add(option);
                    }
                }
                if (teamDropdownElement.options.length <= 1) {
                    const noTeamsOption = document.createElement("option");
                    noTeamsOption.value = "";
                    noTeamsOption.text = "No teams in this division";
                    teamDropdownElement.add(noTeamsOption);
                    teamDropdownElement.disabled = true;
                }
            } else {
                const noTeamsOption = document.createElement("option");
                noTeamsOption.value = "";
                noTeamsOption.text = "No team data available";
                teamDropdownElement.add(noTeamsOption);
                teamDropdownElement.disabled = true;
            }
        };

        function updateRounds(MatchesBasedOnRoundsDataCache) {
            const matchDropdownElement = document.getElementById('match');
            matchDropdownElement.innerHTML = '<option value="">Loading matches...</option>';
            matchDropdownElement.disabled = true;

            const selectedRound = document.getElementById('round').value;

            if (MatchesBasedOnRoundsDataCache && selectedRound !== "") {
                matchDropdownElement.innerHTML = '';
                const defaultOption = document.createElement("option");
                defaultOption.value = "";
                defaultOption.text = "Select a Match";
                matchDropdownElement.add(defaultOption);

                let hasMatches = false;
                matchDropdownElement.disabled = false;

                for (const key in MatchesBasedOnRoundsDataCache) {
                    if (MatchesBasedOnRoundsDataCache.hasOwnProperty(key)) {
                        const matchInfo = MatchesBasedOnRoundsDataCache[key];
                        if (matchInfo && matchInfo[0] === selectedRound) {
                            const option = document.createElement("option");
                            option.text = matchInfo[1];
                            option.value = matchInfo[1];
                            matchDropdownElement.add(option);
                            hasMatches = true;
                        }
                    }
                }

                if (!hasMatches) {
                    const noMatchesOption = document.createElement("option");
                    noMatchesOption.value = "";
                    noMatchesOption.text = "No matches for this round";
                    matchDropdownElement.add(noMatchesOption);
                    matchDropdownElement.disabled = true;
                }
            } else {
                matchDropdownElement.innerHTML = '<option value="">Select a Round first</option>';
                matchDropdownElement.disabled = true;
            }
        }

        document.getElementById('region').addEventListener('change', (event) => {
            const selectedRegion = event.target.value;
            var sheetname = document.getElementById('region').value;

            const teamDropdown = document.getElementById('team');
            teamDropdown.innerHTML = '<option value="">Loading teams...</option>';
            teamDropdown.disabled = true;

            const roundDropdown = document.getElementById('round');
            const matchDropdown = document.getElementById('match');
            roundDropdown.selectedIndex = 0;
            matchDropdown.innerHTML = '<option value="">Select a Round first</option>';
            matchDropdown.disabled = true;


            if (selectedRegion) {
                fetch('https://script.google.com/macros/s/AKfycby6Qr0P_w2xZ4dkvXRstQd2EqZZuF9YgtLcj2ufhMkVnRBDDM4FQ0Ktk0tle45_HEAq/exec' + '?sheetname=' + encodeURIComponent(sheetname))
                    .then(response => response.json())
                    .then(data => {
                        teamsDataCache = data.teams || [];
                        populateTeamDropdown(teamsDataCache);
                        teamDropdown.disabled = false;

                        MatchesBasedOnRoundsDataCache = data.listofmatchesbasedonround || [];
                        console.log('MatchesBasedOnRoundsDataCache:', MatchesBasedOnRoundsDataCache);
                    })
                    .catch(error => {
                        console.error('Error fetching data:', error);
                        teamDropdown.innerHTML = '<option value="">Error loading teams</option>';
                        teamDropdown.disabled = false;
                        matchDropdown.innerHTML = '<option value="">Error loading matches</option>';
                        matchDropdown.disabled = false;
                    });
            } else {
                teamDropdown.innerHTML = '<option value="">Select a team</option>';
                teamDropdown.disabled = true;
                roundDropdown.selectedIndex = 0;
                matchDropdown.innerHTML = '<option value="">Select a Round first</option>';
                matchDropdown.disabled = true;
                MatchesBasedOnRoundsDataCache = [];
            }
        });

        document.getElementById('round').addEventListener('change', function() {
            const matchDropdownElement1 = document.getElementById('match');
            matchDropdownElement1.innerHTML = '<option value="">Loading matches....</option>';
            matchDropdownElement1.disabled = true;
            updateRounds(MatchesBasedOnRoundsDataCache);
        });


        document.getElementById('customForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const submitButton = event.submitter;
            submitButton.disabled = true;
            submitButton.classList.add('loading');

            var region = document.getElementById('region').value;
            var team = document.getElementById('team').value;
            var roundNo = document.getElementById('round').value;
            var teamVs = document.getElementById('match').value;

            var threepointsplayer = document.getElementById('player1Name').value;
            var twopointsplayer = document.getElementById('player2Name').value;
            var onepointplayer = document.getElementById('player3Name').value;

            var fiveWicketHaulPlayer = document.getElementById('fiveWicketHaulPlayer').value;
            var fiveWicketHaulFigures = document.getElementById('fiveWicketHaulFigures').value;
            var fiveWicketHaulGround = document.getElementById('fiveWicketHaulGround').value;

            var hatTrickPlayer = document.getElementById('hatTrickPlayer').value;
            var hatTrickFigures = document.getElementById('hatTrickFigures').value;
            var hatTrickGround = document.getElementById('hatTrickGround').value;

            var centuryPlayer = document.getElementById('centuryPlayer').value;
            var centuryScore = document.getElementById('centuryScore').value;
            var centuryGround = document.getElementById('centuryGround').value;


            if (!region || !team || !roundNo || !teamVs) {
                alert("Please fill in all the required fields (Division, Team, Round, Match).");
                submitButton.disabled = false;
                submitButton.classList.remove('loading');
                return;
            }

            let formData = new URLSearchParams();
            formData.append('region', region);
            formData.append('team', team);
            formData.append('roundNo', roundNo);
            formData.append('match', teamVs);

            formData.append('threepointsplayer', threepointsplayer);
            formData.append('twopointsplayer', twopointsplayer);
            formData.append('onepointplayer', onepointplayer);

            formData.append('fiveWicketHaulPlayer', fiveWicketHaulPlayer);
            formData.append('fiveWicketHaulFigures', fiveWicketHaulFigures);
            formData.append('fiveWicketHaulGround', fiveWicketHaulGround);

            formData.append('hatTrickPlayer', hatTrickPlayer);
            formData.append('hatTrickFigures', hatTrickFigures);
            formData.append('hatTrickGround', hatTrickGround);

            formData.append('centuryPlayer', centuryPlayer);
            formData.append('centuryScore', centuryScore);
            formData.append('centuryGround', centuryGround);

            fetch('https://script.google.com/macros/s/AKfycbwuSozhn9zsMr4MauQl4tEX8Io-WLb5Lr6Ff-w0uc5a1cF6YAIbaJ01TLx30-KXlxrd/exec', {
                    method: 'POST',
                    mode: 'cors',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: formData.toString()
                })
                .then(response => response.text())
                .then(data => {
                    console.log(data);
                    alert(data);

                    document.getElementById('region').selectedIndex = 0;
                    document.getElementById('round').selectedIndex = 0;

                    document.getElementById('player1Name').value = '';
                    document.getElementById('player2Name').value = '';
                    document.getElementById('player3Name').value = '';
                    document.getElementById('fiveWicketHaulPlayer').value = '';
                    document.getElementById('fiveWicketHaulFigures').value = '';
                    document.getElementById('fiveWicketHaulGround').value = '';
                    document.getElementById('hatTrickPlayer').value = '';
                    document.getElementById('hatTrickFigures').value = '';
                    document.getElementById('hatTrickGround').value = '';
                    document.getElementById('centuryPlayer').value = '';
                    document.getElementById('centuryScore').value = '';
                    document.getElementById('centuryGround').value = '';

                    const teamDropdownOnSubmit = document.getElementById('team');
                    teamDropdownOnSubmit.innerHTML = '<option value="">Select a team</option>';
                    teamDropdownOnSubmit.disabled = true;

                    const matchDropdownOnSubmit = document.getElementById('match');
                    matchDropdownOnSubmit.innerHTML = '<option value="">Select a Round first</option>';
                    matchDropdownOnSubmit.disabled = true;

                    MatchesBasedOnRoundsDataCache = [];
                    divisionTeamsDataCache = [];

                    document.querySelector('.tab-button.active').classList.remove('active');
                    document.querySelector('.tab-content.active').classList.remove('active');
                    document.querySelector('.tab-button').classList.add('active');
                    document.getElementById('playerPointsTab').classList.add('active');
                })
                .catch(error => {
                    console.error('Error:', error);
                    alert('An error occurred. Please try again.');
                })
                .finally(() => {
                    submitButton.disabled = false;
                    submitButton.classList.remove('loading');
                });
        });

        document.addEventListener('DOMContentLoaded', (event) => {
            const firstTabButton = document.querySelector('.tab-button');
            if (firstTabButton) {
                firstTabButton.click();
            }
        });
    </script>
</body>
</html>
